@page
@using BoardGame.Model.Tiles
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}
<h3>@Model._startScenario.Name</h3>
<div class="playBoard">
    @{
        var items = Model._startScenario.Map;
        var lineCount = 0;
        foreach (var line in items)
        {
            <div class="customRow">
            @if (lineCount % 2 == 1)
            {
                <div class="emptyTill"></div>
            }
            @foreach (var tilCell in line)
            {
                <div class="till @Model.GetTilColor(tilCell.TileType)">
                    @if (tilCell.IdTil != 0)
                    {
                        var til = Model._repo.GetPlayFieldTilById(tilCell.IdTil);
                        var names = til.NodeProps.Where(x => x.Meet != null)
                            .Select(x => x.Meet.Name)
                            .ToList();
                        @string.Join(',', names);
                    }
                    <img class="img" src="/img/Tils/@Model.GetImg(tilCell)"/>
                                                                                       </div>
            }

            @{
                lineCount += 1;
            }
            </div>
        }
    }
    
</div>
<style>
    .playBoard{
        display: flex;
        flex-direction: column;
        flex: 0 0;
        background: gray;
    }
    .customRow{
        display: flex;
        flex-direction: row;
        flex: 0 0;
    }
    .emptyTill{
        width: 150px;
        height: 300px;
        border: 1px solid black;
    }
    .till{
        width: 300px;
        height: 300px;
        border: 1px solid black;
        position: relative;
    }
    .img{
        width: 100%;
        height: 100%;
    }
    .till.green{
        background: green;
    }
    .till.red{
        background: red;
    }
    .till.start{
        background: white;
    }
    .till.id{
        background: gold;
    }
    
</style>